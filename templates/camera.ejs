<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../stylesheets/style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <title>Document</title>
</head>
<body>
    <div id="main">
        <div id="nav">
          <div id="icon">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdZ-FJxbbwwDBlwEywJoV4Rvmc51VOkv6M1A&usqp=CAU" alt="">
            <h3>Herbs classification</h3>
          </div>
          <div id="mid">
            <a href="/home">Home</a>
            <a href="">About us</a>
            <a href="">Details</a>
            <a href="">How we work</a>
          </div>
          <div id="last">
            <i class="ri-menu-line"></i>
          </div>
        </div>

        <div class="container">	
  <div class="row">
	<div class="col-lg-6" align="center">
		<label>Capture live photo</label>
		<div id="my_camera" class="pre_capture_frame" ></div>
		<input type="hidden" name="captured_image_data" id="captured_image_data">
		<br>
		<input type="button" class="btn btn-info btn-round btn-file" value="Take Snapshot" onClick="take_snapshot()">	
	</div>
	<div class="col-lg-6" align="center">
		<label>Result</label>
		<div id="results" >
			<img style="width: 350px;" class="after_capture_frame" src="../def.png" />
		</div>
		<br>
		<button type="button" class="btn btn-success" onclick="saveSnap()">Save Picture</button>
	</div>	
  </div><!--  end row -->
</div><!-- end container -->
<!--   
       <video id="video" autoplay playsinlne width="500" height="300"></video>
      <button id="snap">capture</button>
      <canvas id="canvas"></canvas> -->

        </div>
      



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" ></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.24/webcam.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script language="JavaScript">
    // Configure a few settings and attach camera 250x187
    Webcam.set({
     width: 350,
     height: 287,
     image_format: 'jpeg',
     jpeg_quality: 90
    });	 
    Webcam.attach( '#my_camera' );
   
   function take_snapshot() {
    // play sound effect
    //shutter.play();
    // take snapshot and get image data
    Webcam.snap( function(data_uri) {
    // display results in page
    document.getElementById('results').innerHTML = 
     '<img class="after_capture_frame" src="'+data_uri+'"/>';
    $("#captured_image_data").val(data_uri);
    });	 
   }

   function saveSnap(){
   var base64data = $("#captured_image_data").val();
    $.ajax({
           type: "POST",
           dataType: "json",
           url: "capture_image_upload.php",
           data: {image: base64data},
           success: function(data) { 
               alert(data);
           }
       });
   }
</script>
      <!-- <script>
      'use strict';
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const snap = document.getElementById('snap');
        const errmsgelement = document.getElementById('span#ErrorMsg');
        const constraints = {
          audio: false,
          video: {
            width: 800, height:500
          }
        }
        async function init(){
          try{
            const stream = await navigator.mediaDevices.getUserMedia(constraints)
            handleSuccess(stream)
          }
          catch(e){
            errmsgelement.innerHTML = `navigator.getUserMedia.error:${e.toString()}`
          }
        }
        function handleSuccess(stream){
          window.stream = stream
          video.srcObject = stream
        }
        init()
        var context = canvas.getContext('2d')
        snap.addEventListener('click',function(){
          context.drawImage(video, 0, 0,300,800)
        })
        </script> -->


</body>
</html>